# 上传问题排查指南

## 当前问题
上传PDF文件时出现 "Upload failed after 3 attempts: Request failed with status code 500" 错误。

## 已发现的线索
1. ✅ 后端服务器正常运行（端口5000）
2. ✅ 前端服务器正常运行（端口3000）
3. ✅ CORS预检请求成功（OPTIONS请求返回200）
4. ❌ 实际的POST请求没有到达后端
5. ❌ 后端日志中没有任何POST请求记录

## 可能的原因

### 1. 文件大小问题
**你的PDF文件有多大？**
- 系统限制：10MB
- 如果文件超过10MB，前端会拒绝上传
- 但错误消息应该是 "File size exceeds 10MB limit"

### 2. 浏览器控制台错误
**请检查浏览器开发者工具：**
1. 按 F12 打开开发者工具
2. 切换到 "Console" 标签
3. 尝试上传文件
4. 查看是否有红色错误消息
5. 将错误消息告诉我

### 3. 网络标签检查
**查看实际的网络请求：**
1. 在开发者工具中切换到 "Network" 标签
2. 尝试上传文件
3. 查找 "/api/convert" 请求
4. 点击该请求查看详情：
   - Status Code（状态码）
   - Response（响应内容）
   - Headers（请求头）
5. 截图或复制错误信息

## 临时解决方案

### 方案1：使用测试页面
我创建了一个简单的测试页面，请尝试：

1. 打开文件：`test_upload_debug.html`
2. 在浏览器中打开这个文件
3. 选择你的PDF文件
4. 点击 "Test Upload"
5. 查看结果

### 方案2：使用curl命令测试
如果你有PDF文件在本地，可以用命令行测试：

```bash
curl -X POST http://localhost:5000/api/convert \
  -F "file=@/path/to/your/file.pdf" \
  -v
```

将 `/path/to/your/file.pdf` 替换为你的PDF文件路径。

### 方案3：尝试更小的文件
1. 找一个很小的PDF文件（比如1-2MB）
2. 或者创建一个简单的PDF
3. 尝试上传看是否成功

## 需要你提供的信息

请告诉我：
1. **PDF文件大小**：多少MB？
2. **浏览器控制台错误**：有什么红色错误消息？
3. **Network标签状态**：请求的状态码是什么？
4. **浏览器类型**：Chrome、Safari、Firefox？

## 下一步

根据你提供的信息，我可以：
1. 修复具体的错误
2. 调整文件大小限制
3. 修复CORS配置
4. 优化错误处理

请先检查浏览器控制台，然后告诉我你看到了什么！
